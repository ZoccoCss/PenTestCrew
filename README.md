# Pentestcrew

Use Artificial Intelligence (AI) Large Language Models (LLM) to assist in the Penetration Testing process. Based on the MITRE ATT&CK framework, this project focuses on Reconnaissance and Resource Development tactics.

This approach is distinct from other projects like [PentestGPT](https://github.com/GreyDGL/PentestGPT) that leverage LLMs for Penetration Testing.

**Note:** The use of this code is for educational purposes only.

### AI Model

We utilize Groq's Mixtral 8x7B for the artificial intelligence, which provides the fastest tokens per second and is currently free to use. Groq offers other models, and you can easily switch by making a small code change. A rate limit has been implemented to avoid exceeding Groq's model rate and receiving errors. Smaller models have higher rate limits.

The code can also be adapted to use any LLM or API, such as OpenAI, or a local model.

### Crew

Currently, we don't see the need for more than 2 agents. Testing with more agents did not yield significant benefits due to increased complexity.

The program initiates a network scan using nmap and supplies the information to the model. Initially, we asked the model to suggest the first step in a Penetration Test, but this approach yielded inconsistent results, reducing the scope of the test.

We leveraged the Crewai human tool to control the execution flow of the program, working alongside the AI rather than relying solely on it. At the end of each task, the user provides feedback on the progress. If the user agrees with the results, they can simply respond with "continue."

### Scope Limitations

We have concentrated on MITRE's Reconnaissance and Resource Development tactics, as other tactics, such as Phishing, require a different approach. Some tactics involve iterative shell commands, which create a security risk if executed autonomously by the model. To mitigate this, we can either have the model suggest scripts and have the user run them, or implement an agent to verify the work of the script-generating agent.

### Use

1. **Configure Environment:** Copy `.env.example` and set up the environment variables for the services you will be using.
2. **Install Poetry:** `pip install poetry`.
3. **Install Dependencies:** `poetry install --no-root`.
4. **Execute the Script:** `poetry run python main.py` and input your idea.

### Future Upgrades

* Integrate RAG for exploits, using a local installation of searchsploit and the DirectorySearchTool from crewai to improve performance.
* Enable agents to perform shell commands, but with caution, as this poses a security risk.
* Integrate a model like [WhiteRabbitNeo](https://huggingface.co/WhiteRabbitNeo/WhiteRabbitNeo-33B-v1) to create scripts, as these models are specifically designed for this purpose and may provide better suggestions. This would require running the model locally or in the cloud (e.g., Runpod, Hugginface, etc.).
* Run a web scraper and also extract the header information on each of the open ports to determine if there is a possibility of web application exploitation, SQL injection, etc.
* The human interaction tool from Crewai s not working as expected, try the human tool from Langchain instead. 